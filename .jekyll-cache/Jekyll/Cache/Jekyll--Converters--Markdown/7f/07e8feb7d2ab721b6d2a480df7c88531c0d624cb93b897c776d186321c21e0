I"²™<h2 id="å‰è¨€">å‰è¨€</h2>

<p>DataBinding å‡ºæ¥å¾ˆä¹…äº†ï¼Œä¸è¿‡ç°åœ¨è¿ MVP éƒ½æ²¡æœ‰å¤§è§„æ¨¡è¢«ä½¿ç”¨ï¼Œåˆ«è¯´å†™æ³•ç”¨æ³•æ›´é¢ è¦†æ€§çš„ DatatBinding è¿™æ ·çš„äº†ã€‚ä½† DataBinding è¿™ç§é¢å‘ MVVM çš„ç¼–ç¨‹æ€æƒ³å‰ç«¯çš„ä½¿ç”¨å·²ç»éå¸¸æ™®éäº†ï¼Œä¸”ç¡®å®ç»™å¼€å‘å¸¦æ¥å¾ˆå¤§çš„ä¾¿åˆ©ã€‚æ‰€ä»¥è¿˜æ˜¯æœ‰å¿…è¦å­¦ä¹ å’Œäº†è§£ã€‚</p>

<h2 id="ä»€ä¹ˆæ˜¯-databinding">ä»€ä¹ˆæ˜¯ DataBinding?</h2>

<p>ç®€å•çš„æ¥è¯´ DataBinding æ˜¯ Google åœ¨ Android ä¸Šçš„ä¸€ç§ MVVM çš„å®ç°ã€‚MVVM æ˜¯<code class="language-plaintext highlighter-rouge">Model-View-ViewModel</code>çš„ç®€å†™ï¼Œå®ƒæ˜¯ MVP(Model-View-Persenter) æ¨¡å¼ä¸ WPF ç»“åˆçš„åº”ç”¨æ–¹å¼å‘å±•æ¼”å˜è¿‡æ¥çš„ä¸€ç§æ–°å‹æ¶æ„ã€‚è€Œ WPF ä¸»è¦å¸¦æ¥çš„ç‰¹æ€§å°±æ˜¯<strong>æ•°æ®ç»‘å®š</strong>ï¼Œè¿™ä¹Ÿæ˜¯ Data Binding æ‰€å®ç°çš„åŠŸèƒ½ã€‚</p>

<p><img src="http://www.cyxqd.com/wp-content/uploads/2014/10/nmwentill.jpg" alt="" /></p>

<h2 id="æ•°æ®ç»‘å®š">æ•°æ®ç»‘å®š</h2>

<p>æ•°æ®ç»‘å®šåˆ†ä¸º<strong>å•é¡¹ç»‘å®š</strong>å’Œ<strong>åŒå‘ç»‘å®š</strong>;å•å‘ç»‘å®šå°±æ˜¯å°†è§†å›¾ä¸Šçš„æ§ä»¶çš„å±æ€§ç»‘å®šåˆ°ä¸€ä¸ªå¯¹è±¡çš„æŸä¸ªå±æ€§çš„æ–¹æ³•ï¼Œå½“å¯¹è±¡çš„å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ç›´æ¥å½±å“åˆ°æ§ä»¶ä¸Šï¼›åŒå‘ç»‘å®šçš„è¯å°±æ˜¯å¯ä»¥äº’ç›¸å½±å“â€”â€”ä¾‹å¦‚æˆ‘ä»¬å°†<code class="language-plaintext highlighter-rouge">User</code>ç±»çš„<code class="language-plaintext highlighter-rouge">name</code>å±æ€§ç»‘å®šåˆ°<code class="language-plaintext highlighter-rouge">TextView</code>çš„<code class="language-plaintext highlighter-rouge">setText</code>å±æ€§ä¸Šï¼Œè¿™æ ·å½“æˆ‘ä»¬ä¿®æ”¹ name çš„å€¼æ—¶ setText å€¼ä¹Ÿå‘ç”Ÿç›¸åº”çš„æ”¹å˜ï¼Œæ— éœ€æˆ‘ä»¬è‡ªå·±å» setText æ›´æ–°å±æ€§ã€‚Data Binding ä¸ä»…å¯ä»¥å¸®æˆ‘ä»¬åœ¨ Android ä¸Šå®ç°è¿™ä¸€æœºåˆ¶ï¼Œè¿˜ä¸ºæ­¤é™„å¸¦äº†å¾ˆå¤šä¾¿åˆ©ï¼Œå‡å°‘äº†å¾ˆå¤šå·¥å…·ä»£ç çš„ç¼–å†™ã€‚</p>

<ul>
  <li>
    <p><strong>é¡¹ç›®æ›´åŠ è§£è€¦ï¼Œå„ä¸ªç»„ä»¶çš„ä¾èµ–æ€§è¿›ä¸€æ­¥é™ä½ï¼Œå¢åŠ å¯å¤ç”¨æ€§</strong></p>
  </li>
  <li><strong>å»æ‰ Activities&amp;Fragment å†…çš„å¤§éƒ¨åˆ† UI ä»£ç </strong>ï¼Œä¾‹å¦‚<code class="language-plaintext highlighter-rouge">onClickListener</code>ã€<code class="language-plaintext highlighter-rouge">setText</code>ã€<code class="language-plaintext highlighter-rouge">findViewById</code>ç­‰</li>
  <li><strong>xml çš„åŠŸèƒ½å¢å¼º</strong>ã€‚xml ä¸å†åªæ˜¯å£°æ˜ UI çš„ç•Œé¢ï¼Œè¿˜èµ·åˆ°æ•°æ®çš„ç»‘å®šï¼Œèµ‹å€¼ï¼Œé€»è¾‘åˆ¤æ–­ç­‰åŠŸèƒ½ã€‚</li>
  <li><strong>æ€§èƒ½æé«˜ï¼Œå‡å°‘ view id çš„å®šä¹‰</strong>ã€‚ç”±äºæ•°æ®ç»‘å®šç›´æ¥åœ¨ xml äº§ç”Ÿï¼Œæ‰€ä»¥ä¸ç”¨ç»å°½è„‘æ±çš„å…¶å¤§é‡çš„åç§°ä¸”åœ¨ç»‘å®šçš„æ—¶å€™å°±ä¸€æ¬¡æ€§çš„é€šè¿‡ gruop å°† view å…¨éƒ¨è·å–ï¼Œæ¯”å•ä¸ª<code class="language-plaintext highlighter-rouge">findViewById</code>æ›´åŠ çš„è¿…é€Ÿã€‚</li>
</ul>

<h2 id="æ­å»ºç¯å¢ƒ">æ­å»ºç¯å¢ƒ</h2>

<p>Data Binding åœ¨ Android Studio 1.3 ç‰ˆæœ¬&amp;Gradle1.5 åå°±å†…ç½®åœ¨ IDE ä¸­äº†ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨<code class="language-plaintext highlighter-rouge">gradle.project</code>ä¸­<code class="language-plaintext highlighter-rouge">Android</code>æ¨¡å—ä¸‹å£°æ˜å¼€å¯ Data Binding å³å¯</p>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="n">android</span><span class="o">{</span>
  <span class="o">...</span>
    <span class="n">dataBinding</span><span class="o">{</span>
      <span class="n">enabled</span><span class="o">=</span><span class="kc">true</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="åŸºç¡€ä½¿ç”¨">åŸºç¡€ä½¿ç”¨</h2>

<h3 id="ç¼–å†™-view">ç¼–å†™ View</h3>

<p>æ•°æ®ç»‘å®šéœ€è¦åœ¨ xml ä¸­å£°æ˜å„ç§å…³ç³»ï¼Œä¹Ÿå¯ä»¥å†™ä¸€äº›ç®€å•çš„è¿ç®—ã€‚å£°æ˜ä¸€ä¸ª data Binding Layout åªéœ€è¦åœ¨åŸæ¥çš„ layout xml æ–‡ä»¶åŸºç¡€åŠ ä¸€ä¸ªæ ‡ç­¾å³å¯:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;layout&gt;</span>
//...rootView
<span class="nt">&lt;/layout&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>è¿™æ ·åœ¨ç¼–è¯‘æ—¶ï¼Œä¿®æ”¹åå³å¯æœç´¢åˆ°å¸ƒå±€ç”Ÿæˆçš„å¯¹åº”çš„*Binding ç±»ã€‚ç”Ÿæˆçš„è§„åˆ™é»˜è®¤æ˜¯é€šè¿‡ xml çš„æ–‡ä»¶åç”Ÿæˆï¼Œä¾‹å¦‚<code class="language-plaintext highlighter-rouge">activity_main.xml</code>å°±ä¼šå¯¹åº”ç”Ÿæˆä¸º<code class="language-plaintext highlighter-rouge">ActivityMainBinding.java</code>çš„æ–‡ä»¶ã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‡å®šè‡ªå®šç”Ÿæˆçš„æ–‡ä»¶åç§°ï¼Œéœ€è¦åœ¨<code class="language-plaintext highlighter-rouge">layout</code>æ ‡ç­¾ä¸‹åŠ å…¥<code class="language-plaintext highlighter-rouge">data</code>æ ‡ç­¾å¹¶æŒ‡å®š<code class="language-plaintext highlighter-rouge">class</code>å±æ€§å³å¯(ç”Ÿæˆ LoginBinding.java)ï¼Œé™¤æ­¤ä¹‹å¤–<code class="language-plaintext highlighter-rouge">data</code>ä¹Ÿæ˜¯æˆ‘ä»¬å£°æ˜å˜é‡çš„åœ°æ–¹ï¼Œç¨åå†è¯¦ç»†ä»‹ç»ã€‚</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;data</span> <span class="na">class=</span><span class="s">"login"</span><span class="nt">&gt;</span>
....
<span class="nt">&lt;/data&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æˆ‘ä»¬æ¥ç¼–å†™ä¸€ä¸ªç®€å•çš„ç™»å½•ç•Œé¢:</p>

<p>å…ˆä½¿ç”¨<code class="language-plaintext highlighter-rouge">variable</code>ç»‘å®šæˆ‘ä»¬æ‰€éœ€è¦çš„å¯¹è±¡ã€‚<code class="language-plaintext highlighter-rouge">type</code>ä¸ºè¯¥å¯¹è±¡çš„åœ°å€,<code class="language-plaintext highlighter-rouge">name</code>åˆ™éšæ„å‘½åã€‚è¿™é‡Œæˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ª<code class="language-plaintext highlighter-rouge">Action</code>å’Œ<code class="language-plaintext highlighter-rouge">Presenter</code>,<code class="language-plaintext highlighter-rouge">Action</code>ç”¨äºç»‘å®šæ•°æ®ï¼Œ<code class="language-plaintext highlighter-rouge">Presenter</code>åˆ™ç”¨æ¥ç»‘å®šä¸€äº›äº‹ä»¶å’Œåšé€»è¾‘å¤„ç†ã€‚</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;layout&gt;</span>
<span class="nt">&lt;data&gt;</span>
        <span class="nt">&lt;variable</span>
            <span class="na">name=</span><span class="s">"presenter"</span>
            <span class="na">type=</span><span class="s">"com.example.qhfax.databindingexample.presenter.MainPresenter"</span> <span class="nt">/&gt;</span>

        <span class="nt">&lt;variable</span>
            <span class="na">name=</span><span class="s">"action"</span>
            <span class="na">type=</span><span class="s">"com.example.qhfax.databindingexample.bean.Action"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/data&gt;</span>

  //...rootView
  <span class="nt">&lt;/layout&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å£°æ˜å¥½å¯¹è±¡åï¼Œæˆ‘ä»¬å°±å¼€å§‹å°†å¯¹è±¡ç»‘å®šåˆ°æ•°æ®æºä¸Šã€‚åœ¨ Data Binding ä¸­ï¼Œæˆ‘ä»¬ç»‘å®šæ•°æ®éœ€è¦ä½¿ç”¨<code class="language-plaintext highlighter-rouge">@{code}</code>ä¹¦å†™ï¼Œå‘æ’ä»¶å£°æ˜è¿™æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ã€‚è¿™é‡Œæˆ‘ä»¬å°†<code class="language-plaintext highlighter-rouge">name</code>å±æ€§ç»‘å®šåˆ°<code class="language-plaintext highlighter-rouge">TextView</code>çš„<code class="language-plaintext highlighter-rouge">setText</code>ä¸Šã€‚</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;TextView</span>
            <span class="na">android:layout_width=</span><span class="s">"63dp"</span>
            <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
            <span class="na">android:layout_marginLeft=</span><span class="s">"8dp"</span>
            <span class="na">android:layout_marginRight=</span><span class="s">"8dp"</span>
            <span class="na">android:layout_marginTop=</span><span class="s">"60dp"</span>
            <span class="na">android:gravity=</span><span class="s">"center"</span>
            <span class="na">android:text=</span><span class="s">"@{action.name}"</span> <span class="nt">/&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ä¹‹ååœ¨ Activity ä¸­æˆ‘ä»¬éœ€è¦ä½¿ç”¨<code class="language-plaintext highlighter-rouge">DataBindingUtil</code>è·å–<code class="language-plaintext highlighter-rouge">ActivityMainDataBinding</code>çš„å®ä¾‹</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nc">ActivityMainDataBinding</span> <span class="n">mMainBind</span><span class="o">=</span><span class="nc">DataBindingUtil</span><span class="o">.</span><span class="na">setContentView</span><span class="o">(</span><span class="k">this</span><span class="o">,</span><span class="no">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_main</span><span class="o">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ç„¶åå»ç»‘å®šå¯¹è±¡</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="nc">Action</span> <span class="n">action</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Action</span><span class="o">();</span>
<span class="n">action</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"ç”¨æˆ·åï¼š"</span><span class="o">);</span>
<span class="n">mMainBind</span><span class="o">.</span><span class="na">setAction</span><span class="o">(</span><span class="n">action</span><span class="o">)</span>
<span class="n">mMainBind</span><span class="o">.</span><span class="na">setPersenter</span><span class="o">(</span><span class="n">persenter</span><span class="o">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>è¿è¡Œåå°±å¯ä»¥å‘ç°<code class="language-plaintext highlighter-rouge">TextView</code>å°±ç›´æ¥è¢«èµ‹å€¼å•¦ã€‚</p>

<h3 id="ç»‘å®šçš„åŸç†">ç»‘å®šçš„åŸç†</h3>

<p>å—¯â€¦.æˆ‘ä»¬å¯ä»¥å…ˆè§‚å¯Ÿä¸€ä¸‹ç›®å‰çš„æµç¨‹æ˜¯æ€ä¹ˆèµ°ä¸‹æ¥çš„ï¼›</p>

<ol>
  <li>
    <p>åœ¨<code class="language-plaintext highlighter-rouge">xml</code>æ–‡ä»¶ä¸­ç»‘å®šæ§ä»¶ï¼Œç„¶åæ’ä»¶ä¼šæ ¹æ®<code class="language-plaintext highlighter-rouge">layout</code>ç”Ÿæˆå¯¹åº”çš„å®ä½“ç±»ã€‚é€šè¿‡ DataBindingUtli æ¥æ„å»ºå¯¹åº”çš„ Bind å®ä¾‹ï¼ŒæŸ¥çœ‹ DataBindingUtil çš„ä»£ç ä¼šå‘ç°çš„å·¥ä½œå®ç°ååˆ†ç®€å•ï¼Œå°†å±æ€§å’Œ view é›†åˆä¼ é€’ç»™æˆ‘ä»¬çš„ DataBinding:</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="rouge-code"><pre><span class="c1">//æŸ¥æ‰¾åˆ°å¸ƒå±€ViewGruop</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="no">T</span> <span class="kd">extends</span> <span class="nc">ViewDataBinding</span><span class="o">&gt;</span> <span class="no">T</span> <span class="nf">setContentView</span><span class="o">(</span><span class="nc">Activity</span> <span class="n">activity</span><span class="o">,</span> <span class="kt">int</span> <span class="n">layoutId</span><span class="o">,</span>
            <span class="nc">DataBindingComponent</span> <span class="n">bindingComponent</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">activity</span><span class="o">.</span><span class="na">setContentView</span><span class="o">(</span><span class="n">layoutId</span><span class="o">);</span>
        <span class="nc">View</span> <span class="n">decorView</span> <span class="o">=</span> <span class="n">activity</span><span class="o">.</span><span class="na">getWindow</span><span class="o">().</span><span class="na">getDecorView</span><span class="o">();</span>
        <span class="nc">ViewGroup</span> <span class="n">contentView</span> <span class="o">=</span> <span class="o">(</span><span class="nc">ViewGroup</span><span class="o">)</span> <span class="n">decorView</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="n">android</span><span class="o">.</span><span class="na">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">content</span><span class="o">);</span>
        <span class="k">return</span> <span class="nf">bindToAddedViews</span><span class="o">(</span><span class="n">bindingComponent</span><span class="o">,</span> <span class="n">contentView</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">layoutId</span><span class="o">);</span>
<span class="c1">//éå†æ‰€æœ‰çš„Viewç„¶åè°ƒç”¨ViewDataBinding.Bindæ–¹æ³•å°†æ•°æ®ä¼ ç»™æˆ‘ä»¬çš„å®ä½“ç±»`ActivityMainDataBinding`</span>
<span class="kd">private</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="no">T</span> <span class="kd">extends</span> <span class="nc">ViewDataBinding</span><span class="o">&gt;</span> <span class="no">T</span> <span class="nf">bindToAddedViews</span><span class="o">(</span><span class="nc">DataBindingComponent</span> 			<span class="n">component</span><span class="o">,</span> <span class="nc">ViewGroup</span> <span class="n">parent</span><span class="o">,</span> <span class="kt">int</span> <span class="n">startChildren</span><span class="o">,</span> <span class="kt">int</span> <span class="n">layoutId</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">endChildren</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="na">getChildCount</span><span class="o">();</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">childrenAdded</span> <span class="o">=</span> <span class="n">endChildren</span> <span class="o">-</span> <span class="n">startChildren</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">childrenAdded</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">View</span> <span class="n">childView</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="na">getChildAt</span><span class="o">(</span><span class="n">endChildren</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
        <span class="k">return</span> <span class="nf">bind</span><span class="o">(</span><span class="n">component</span><span class="o">,</span> <span class="n">childView</span><span class="o">,</span> <span class="n">layoutId</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">View</span><span class="o">[]</span> <span class="n">children</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">View</span><span class="o">[</span><span class="n">childrenAdded</span><span class="o">];</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">childrenAdded</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">children</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="na">getChildAt</span><span class="o">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">startChildren</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="nf">bind</span><span class="o">(</span><span class="n">component</span><span class="o">,</span> <span class="n">children</span><span class="o">,</span> <span class="n">layoutId</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>

    <p>â€‹</p>
  </li>
  <li>
    <p>é€šè¿‡ Bind å®ä¾‹ç»‘å®šæ•°æ®æºï¼Œå…³è”æ§ä»¶å‘ç”Ÿæ”¹å˜ã€‚é‚£ä¹ˆæ•°æ®ç»‘å®šä¸åˆ·æ–°åˆæ˜¯å¦‚ä½•å‘ç”Ÿçš„å‘¢ï¼Ÿåœ¨æºç ä¸­æˆ‘ä»¬å¯ä»¥å‘ç°æœ€ç»ˆåº”è¯¥æ˜¯è°ƒç”¨äº†<code class="language-plaintext highlighter-rouge">ActivityMainBinding</code>çš„<code class="language-plaintext highlighter-rouge">executeBindings()</code>æ–¹æ³•æ¥æ‰§è¡Œæ§ä»¶åˆ·æ–°çš„ï¼Œæºç å¹¶ä¸å¤æ‚ã€‚</p>
  </li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre> <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">executeBindings</span><span class="o">()</span> <span class="o">{</span>
   <span class="c1">//dirtyFlagsçš„ä½œç”¨ä¸»è¦æ˜¯é€šè¿‡ä½è¿ç®—æ¥åˆ¤æ–­æ§ä»¶çš„æ•°æ®æºå¯¹è±¡æ˜¯å¦è¢«ç»‘å®šï¼Œè¿™é‡Œæˆ‘ä»¬å°±ä¸å…³å¿ƒå…·ä½“å®ç°ã€‚</span>
        <span class="kt">long</span> <span class="n">dirtyFlags</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="kd">synchronized</span><span class="o">(</span><span class="k">this</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">dirtyFlags</span> <span class="o">=</span> <span class="n">mDirtyFlags</span><span class="o">;</span>
            <span class="n">mDirtyFlags</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="o">}</span>
   		<span class="n">com</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">qhfax</span><span class="o">.</span><span class="na">databindingexample</span><span class="o">.</span><span class="na">bean</span><span class="o">.</span><span class="na">Action</span> <span class="n">action</span> <span class="o">=</span> <span class="n">mAction</span><span class="o">;</span>
   		<span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">String</span> <span class="n">actionName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  		 <span class="k">if</span> <span class="o">((</span><span class="n">dirtyFlags</span> <span class="o">&amp;</span> <span class="mh">0x6</span><span class="no">L</span><span class="o">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">action</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                    <span class="c1">// read action.name</span>
                    <span class="n">actionName</span> <span class="o">=</span> <span class="n">action</span><span class="o">.</span><span class="na">getName</span><span class="o">();</span>
                <span class="o">}</span>
      	  <span class="o">}</span>
    <span class="k">if</span> <span class="o">((</span><span class="n">dirtyFlags</span> <span class="o">&amp;</span> <span class="mh">0x6</span><span class="no">L</span><span class="o">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// å°†æˆ‘ä»¬çš„textViewä¼ é€’åˆ°bindAdapterä¸­è¿›è¡Œèµ‹å€¼ï¼Œç”±äºæˆ‘ä»¬æ²¡æœ‰ç»™TextViewå£°æ˜IDæ‰€æœ‰åç§°æ˜¯ç”±æ’ä»¶è‡ªå·±ç”Ÿæˆçš„åç§°ã€‚</span>
     <span class="n">android</span><span class="o">.</span><span class="na">databinding</span><span class="o">.</span><span class="na">adapters</span><span class="o">.</span><span class="na">TextViewBindingAdapter</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">mboundView2</span><span class="o">,</span> <span class="n">actionName</span><span class="o">);</span>
      <span class="o">}</span>
 <span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å¯ä»¥è§çœ‹å‡ºä»£ç ååˆ†çš„ç®€æ´ï¼ŒåŠŸèƒ½å®ç°éƒ½åœ¨é€‚é…å™¨ä¸­è¿›è¡Œï¼Œè¿™æ ·å¯ä»¥ä¿è¯æƒ…å†µå†å¤æ‚ä»£ç çš„å¯é˜…è¯»æ€§å’Œé€‚é…æ€§ä¹Ÿä¸ä¼šå±‚çº§é€’å¢ã€‚<code class="language-plaintext highlighter-rouge">TextViewBindingAdapter.setText</code>æ–¹æ³•ä¹Ÿå°±æ˜¯è®©<code class="language-plaintext highlighter-rouge">mboundView2</code>è°ƒç”¨<code class="language-plaintext highlighter-rouge">setText</code>æ–¹æ³•æ˜¾ç¤º<code class="language-plaintext highlighter-rouge">actionName</code>çš„å€¼ï¼Œè‡³äº Adapter çš„æ•´ä½“çš„å…·ä½“å®ç°ç­‰åˆ°è‡ªå®šä¹‰ Adapter æ—¶å€™æˆ‘ä»¬å†è§£æã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>  <span class="nd">@BindingAdapter</span><span class="o">(</span><span class="s">"android:text"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setText</span><span class="o">(</span><span class="nc">TextView</span> <span class="n">view</span><span class="o">,</span> <span class="nc">CharSequence</span> <span class="n">text</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">CharSequence</span> <span class="n">oldText</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="na">getText</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">text</span> <span class="o">==</span> <span class="n">oldText</span> <span class="o">||</span> <span class="o">(</span><span class="n">text</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">oldText</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span><span class="o">))</span> <span class="o">{</span>
        <span class="c1">//....å„ç§çº¦æŸåˆ¤æ–­</span>
        <span class="o">}</span>
        <span class="n">view</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">text</span><span class="o">);</span>
    <span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="çœŸæ­£çš„å•å‘ç»‘å®š">çœŸæ­£çš„å•å‘ç»‘å®š</h3>

<p>å¦‚æœä½ ä¹Ÿåœ¨å†™ Example å°±ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œå½“<code class="language-plaintext highlighter-rouge">Action</code>ç»‘å®šåï¼Œåç»­<code class="language-plaintext highlighter-rouge">Action</code>çš„æ”¹å˜å¹¶ä¸ä¼šè®© UI æ›´æ–°å³ Observable(è§‚å¯Ÿè€…æ¨¡å¼)å¹¶æ²¡æœ‰å®ç°ã€‚è¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦è¾¾åˆ°çš„ç›®çš„ã€‚</p>

<p><img src="https://pic3.zhimg.com/079482e5b8748e2e566e9e4eba82e456_b.png" alt="" /></p>

<p>åœ¨ Data Binding æƒ³è¦ä¸€ä¸ª View Model è¢«æ§ä»¶è®¢é˜…å°±éœ€è¦å®ƒç»§æ‰¿<code class="language-plaintext highlighter-rouge">BaseObservable</code>ï¼Œè¿™æ ·å½“<code class="language-plaintext highlighter-rouge">Action</code>æ¯æ¬¡æ”¹å˜çš„æ—¶å€™æˆ‘ä»¬å°±é€šçŸ¥æ§ä»¶æ•°æ®è¢«æ”¹å˜äº†ï¼Œç„¶åæ§ä»¶è‡ªå·±è°ƒç”¨ç›¸å…³å±æ€§çš„æ–¹æ³•å»æ›´æ–°æ•°æ®ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Action</span> <span class="kd">extends</span> <span class="nc">BaseObservable</span><span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
  <span class="c1">//é€šè¿‡åœ¨getæ–¹æ³•ä¸ŠBindableæ³¨è§£è®©BRç”Ÿæˆå¯¹åº”çš„flagï¼Œç¡®å®šå¦‚ä½•åˆ·æ–°nameå€¼</span>
    <span class="nd">@Bindable</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
      <span class="c1">//å½“æˆ‘ä»¬æ”¹å˜å€¼åˆ·æ–°UIï¼ŒnotifyChange()æ˜¯é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…ï¼Œå³ä½¿ç”¨äº†actinoç±»ä¸­ä»»æ„ç»‘å®šäº†å±æ€§éƒ½ä¼šå—åˆ°åˆ·æ–°çš„å‘½ä»¤ï¼›notifyPropertyChanged()å°±å¾ˆæ˜æ˜¾æ˜¯é€šè¿‡flagè¿›è¡Œå•ç‹¬åˆ·æ–°ã€‚</span>
       <span class="c1">//notifyChange();</span>
        <span class="n">notifyPropertyChanged</span><span class="o">(</span><span class="no">BR</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>
    <span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å¦‚æœ View Model å·²ç»æœ‰ç»§æ‰¿çˆ¶ç±»æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å¯¹ç»‘å®šçš„å±æ€§å•ç‹¬çš„å£°æ˜ Observableã€‚DataBinding æä¾›äº†é™¤äº†åŸºç¡€ç±»å‹å¤–è¿˜æœ‰ ObservableParcalable ä¸ ObservableField æ¥è§£å†³å¤§å¤šæ•°åœºæ™¯é‡åˆ°çš„å¯¹è±¡å±æ€§ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Action</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="nc">ObservableField</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">name</span> <span class="o">=</span><span class="k">new</span> <span class="nc">ObservableField</span><span class="o">&lt;&gt;();</span>
  <span class="kd">private</span> <span class="nc">ObservableInt</span> <span class="n">age</span> <span class="o">=</span><span class="k">new</span> <span class="nc">ObservableInt</span><span class="o">();</span>

  <span class="c1">//è¿™æ ·åšçš„å¼Šç«¯æ˜¯æˆ‘ä»¬æ— æ³•ç›´æ¥è®¿é—®åˆ°å±æ€§å€¼ï¼Œéœ€è¦é€šè¿‡Observableçš„get/setæ–¹æ³•</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">){</span>
    <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getName</span><span class="o">(){</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>è¿™æ ·çš„è¯ï¼Œå½“æˆ‘ä»¬è¿è¡Œæ—¶å€™æ§ä»¶å’Œæ•°æ®çš„è”ç³»å°±å»ºç«‹èµ·æ¥äº†ï¼Œæ›´æ–°<code class="language-plaintext highlighter-rouge">name</code>çš„åŒæ—¶ TextView çš„<code class="language-plaintext highlighter-rouge">text</code>ä¹Ÿä¼šåŒæ—¶å‘ç”Ÿå˜åŒ–ã€‚</p>

<p>æ•°æ®æºä¸€å®šè¦å†™ä¸ªå®ä½“ç±»å—ï¼Œé‚£ä¹ˆä¸æ˜¯éœ€è¦æˆå¨çš„ bean ? æˆ‘ä»¬å¯ä»¥é€šè¿‡ ObservableArrayMap å’Œ ObservableArrayList æ¥åˆ›å»ºè§‚å¯Ÿè€…å’Œéœ€è¦è§‚å¯Ÿçš„æ•°æ®ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="nc">ObservableArrayMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span><span class="nc">Object</span><span class="o">&gt;</span> <span class="n">action</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ObseravbleArryMap</span><span class="o">&lt;&gt;();</span>
<span class="n">action</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span><span class="s">"just"</span><span class="o">);</span>
<span class="n">action</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span><span class="s">"gbk"</span><span class="o">)</span>
<span class="nc">ObservableArryList</span> <span class="n">list</span> <span class="o">=</span><span class="k">new</span> <span class="nc">ObservableArryList</span><span class="o">&lt;&gt;();</span>
<span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"first"</span><span class="o">);</span>
<span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"second"</span><span class="o">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>åœ¨ xml ä¸­æˆ‘ä»¬é€šè¿‡ key å’Œ index è®¿é—®ä»–ä»¬</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;variable</span> <span class="na">name=</span><span class="s">"action"</span>
          <span class="na">type=</span><span class="s">"android.databinding.ObserableMap"</span><span class="nt">&gt;&lt;/variable&gt;</span>
<span class="nt">&lt;ariable</span> <span class="na">name=</span><span class="s">"user"</span>
         <span class="na">type=</span><span class="s">"android.databing.ObservableList"</span><span class="nt">&gt;&lt;/ariable&gt;</span>

<span class="nt">&lt;TextView</span>
          <span class="na">android:text=</span><span class="s">"@{action["</span><span class="err">name"]"</span>
          <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
          <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;TextView</span>
          <span class="na">android:text=</span><span class="s">"@{user[1]"</span>
          <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
          <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span><span class="nt">/&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="äº‹ä»¶ç»‘å®š">äº‹ä»¶ç»‘å®š</h3>

<p>æˆ‘ä»¬é™¤äº†å¯ä»¥ç»‘å®š View å„ç§å±æ€§å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ xml ä¸­ç›´æ¥ç»‘å®šäº‹ä»¶ï¼Œè€Œä¸ç”¨é€šè¿‡ View è½¬å‘ã€‚</p>

<p>æˆ‘ä»¬åœ¨ Presenter ä¸­åˆ›å»ºä¸€ä¸ªç›‘å¬æ–‡æœ¬çš„æ–¹æ³•ï¼Œç„¶ååœ¨ xml ä¸­è®¾ç½®<code class="language-plaintext highlighter-rouge">onTextChanged</code>å±æ€§ï¼Œæ–¹æ³•åå¿…é¡»å’Œå¯¹åº”çš„ listener å¯¹åº”.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;EditText</span>
  <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
  <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
  <span class="na">android:onTextChanged=</span><span class="s">"@{presenter::onTextChanged}"</span>
  <span class="nt">/&gt;</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p>å°† Presenter ç»‘å®šåœ¨ Activity ä¸Šåï¼Œå°±å¯ä»¥æ¥å—åˆ° EditText çš„æ”¹å˜äº†</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Presenter</span><span class="o">{</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onTextChanged</span><span class="o">(</span><span class="n">charSequence</span> <span class="n">s</span><span class="o">,</span><span class="n">in</span> <span class="n">start</span> <span class="o">,</span><span class="kt">int</span> <span class="n">before</span><span class="o">,</span><span class="kt">int</span> <span class="n">count</span><span class="o">){</span>
    <span class="n">mView</span><span class="o">.</span><span class="na">show</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">toString</span><span class="o">())</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="è¡¨è¾¾å¼">è¡¨è¾¾å¼</h3>

<p>åœ¨ xml ä¸­çš„ dataBinding è¡¨è¾¾å¼æ”¯æŒ Java ä¸­çš„å¤§éƒ¨åˆ†è¯­æ³•ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>

<ul>
  <li>ç®—æ•° <code class="language-plaintext highlighter-rouge">+-*/%</code></li>
  <li>å­—ç¬¦ä¸²åˆå¹¶<code class="language-plaintext highlighter-rouge">+</code></li>
  <li>é€»è¾‘è¿ç®— <code class="language-plaintext highlighter-rouge">&amp;&amp;||</code></li>
  <li>äºŒå…ƒ<code class="language-plaintext highlighter-rouge">&amp;|^</code></li>
  <li>ä¸€å…ƒ<code class="language-plaintext highlighter-rouge">+-!~</code></li>
  <li>ä½ç§»<code class="language-plaintext highlighter-rouge">&gt;&gt; &gt;&gt;&gt; &gt;&gt;</code></li>
  <li>æ¯”è¾ƒ<code class="language-plaintext highlighter-rouge">== &gt; &lt;&gt; = &lt;=</code></li>
  <li>instanceof æ“ä½œç¬¦</li>
  <li>Groupingï¼ˆï¼‰</li>
  <li>æ–‡å­—</li>
  <li>Cast ç±»å‹è½¬æ¢</li>
  <li>æ–¹æ³•è°ƒç”¨</li>
  <li>å±æ€§è®¿é—®</li>
  <li>æ•°ç»„è®¿é—®</li>
  <li>ä¸‰ç›®è¿ç®—ç¬¦<code class="language-plaintext highlighter-rouge">ï¼Ÿï¼š</code></li>
</ul>

<p>å°šä¸æ”¯æŒ<code class="language-plaintext highlighter-rouge">super</code>ã€<code class="language-plaintext highlighter-rouge">this</code>ã€<code class="language-plaintext highlighter-rouge">new</code>ã€ä»¥åŠæ˜¾ç¤ºçš„æ³›å‹è°ƒç”¨ã€‚</p>

<p>åŒæ—¶ç”±äºåœ¨è¡¨è¾¾å¼åœ¨å­—ç¬¦ä¸²ä¸­å£°æ˜çš„ï¼Œä¸€äº›ç‰¹æ®Šå­—ç¬¦çš„è½¬ä¹‰ä¹Ÿæ˜¯ä¸å¯é¿å…çš„ã€‚</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">ç»“æœ</th>
      <th style="text-align: center">è½¬ä¹‰å­—ç¬¦</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">ç©ºæ ¼</td>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">&amp;nbsp;</code></td>
    </tr>
    <tr>
      <td style="text-align: center">&lt;</td>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">&amp;t;</code></td>
    </tr>
    <tr>
      <td style="text-align: center">&gt;</td>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">&amp;gt;</code></td>
    </tr>
    <tr>
      <td style="text-align: center">&amp;</td>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">&amp;amp;</code></td>
    </tr>
    <tr>
      <td style="text-align: center">â€</td>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">&amp;quot;</code></td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">|</code>'`</td>
      <td style="text-align: center">Â </td>
    </tr>
    <tr>
      <td style="text-align: center">x</td>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">&amp;divide</code></td>
    </tr>
  </tbody>
</table>

<p>é™¤æ­¤ java çš„è¿™äº›è¯­æ³•æ”¯æŒå¤–è¿˜æœ‰ä¸€äº›ç‰¹æ®Šçš„æ”¯æŒã€‚</p>

<ul>
  <li>
    <p>ç©ºåˆå¹¶è¿ç®—ç¬¦â€”â€”ä½¿ç”¨<code class="language-plaintext highlighter-rouge">??</code>æ¥è¿æ¥ä¸¤ä¸ªå¼å­ï¼Œå¦‚æœå·¦è¾¹çš„å¼å­ä¸ºç©ºå°±å–å³è¾¹çš„ã€‚</p>

    <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>android:text="@{user.name??user.realName}"
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>
    <p>ç›´æ¥è®¿é—®èµ„æºæ–‡ä»¶â€”â€”å¯ä»¥é€šè¿‡`@resource/name çš„å½¢å¼è®¿é—®èµ„æºæ–‡ä»¶æ¥ç›´æ¥ä½¿ç”¨</p>

    <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>android:text="@{@String/name(name)}"

<span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"name"</span><span class="nt">&gt;</span>æˆ‘çš„åå­—æ˜¯%s<span class="nt">&lt;/string&gt;</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
</ul>

<h3 id="include">include</h3>

<p>åœ¨ä½¿ç”¨ include å¸ƒå±€æ—¶å€™éœ€è¦å°†è¯¥å¸ƒå±€ä½¿ç”¨çš„æ•°æ®é€šè¿‡<code class="language-plaintext highlighter-rouge">bind:xxx=@{}</code>ä¼ é€’è¿›å»ï¼Œå¹¶åœ¨å¸ƒå±€ä¸­è¿›è¡ŒäºŒæ¬¡ç»‘å®šã€‚</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;include</span> <span class="na">layout=</span><span class="s">"@layout/empty"</span> <span class="na">bind:info=</span><span class="s">"@{info}"</span><span class="nt">/&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>
:ET